#Copy the latest snap_connection_manager.py to binary folder in the debian package and rename it then move to that folder
cp snap_connection_manager.py snap_connection_manager_1.2/usr/bin/snap_connection_manager_1.2.py
        
#########################
# Create debian package #
#########################
#Create the files and folder structure as per:
snap_connection_1.1_all/
├── DEBIAN/
│   ├── control
|   ├── postinst
│   └── postrm
├── usr/
    └── bin/
    │  └── snap_connection_manager_1.2.py
    └── share/
        └── applications/
        │   └── snap_connection_manager.desktop
        ├── icons/
        │  └── hicolor/
        │        └── 512x512/
        │            └── apps/
        │                └── snap_icon.png
        └── snap_connection_manager/
            ├── folder.png
            ├── server.png
            ├── Disclaimer.txt
            ├── user_guide.html
            └── readme.md    



##Where the following is:
#File DEBIAN/control:
Package: snap-connection-manager
Version: 1.2
Architecture: all
Depends: python3, python3-gi, gnupg, python3-gnupg, expect, openssh-client, gnome-terminal | x-terminal-emulator
Maintainer: Tomas Larsson <larre.b.larsson@gmail.com>
Description: Snap Connection Manager is a very slimmed down SSH/SFTP Connection Manager

#File DEBIAN/postrm is:
Is to correclty purge the two settings file ssh_servers.json and snap_cm_settings.json when unstalling the program.
Now especially purging the ssh_servers.json wich will lead to that user has to set a new passphrase at next installation.
If not purge uninstall will then lead that the server users data is retained but of course the passphrase nneds to be
remenbered by the user and to be able to open the program needs to be given and valid. All for safty!

#File usr/share/applications/snap_connection_manager.desktop:
[Desktop Entry]
Name=Snap Connection Manager
Exec=python3 /usr/bin/snap_connection_manager_1.2.py
Icon=/usr/share/icons/hicolor/512x512/apps/snap_icon.png
Terminal=false
Type=Application
StartupWMClass=snap_connection_manager_1.1.py
Categories=Utility;

#File usr/share/snap_connection_manager
Your projects resource directory containing all data files needed
Here we put:
folder.png
server.png
user_guide.html
readme.md

#File  usr/share/icons/hicolor/512x512/apps/snap_icon.png:
Your Application ICON image

#Set permission to 775 recursive on all in folder
chmod -R 775 snap_connection_manager_1.2
#Then build you deb pack by:
sudo dpkg-deb --root-owner-group --build snap_connection_manager_1.2

#This then results in the following deb pack:
snap_connection_manager_1.2.deb

#This then we can install using:
sudo apt install ./snap_connection_manager_1.2.deb
#Note use the above method to get all dependencies to be installed

#To list our debian package
sudo dpkg -l | grep -i snap-connection

#To uninstall:
sudo dpkg -r snap-connection-manager

#Including removing all configuration do:
sudo dpkg --purge snap-connection-manager

#####################################
# Create a APT Repository on Github #
#####################################
#Create a GPG Key
#In my SNAP-Connection-Manager repository
gpg --full-gen-key
Please select what kind of key you want: 1
What keysize do you want? 4096
Key is valid for? (0) 0
Real name: Tomas Larsson
E-mail address: larre.b.larsson@gmail.com
Comment: larre.b.larsson@gmail.com
Change (N)ame, (C)omment, (E)-mail or (O)kay/(Q)uit? O
psw = hp2035_kalle
Key ID = 866C4A21160983AD0ACAE71DA3A178F3E8197519

#Export the key
#Private Key
gpg --export-secret-keys --armor 866C4A21160983AD0ACAE71DA3A178F3E8197519

#Public Key
gpg --export --armor 866C4A21160983AD0ACAE71DA3A178F3E8197519 > public.key

#Go to your GitHub repo > Settings > Secrets and variables > Actions.
#Create a new repository secret named GPG_PRIVATE_KEY above and paste your entire ASCII-armored private key block (including -----BEGIN... and -----END...).
#Add the password set from above as another secretand name it GPG_PASSPHRASE.

#Enable GitHub Pages:
#Go to your GitHub repo > Settings > Pages.
#Under "Build and deployment," set the Source to GitHub Actions.

#Create the GitHub Actions Workflow:
#In your repository, create a file named .github/workflows/build-apt-repo.yml.
#See file in your Repo

#Commit and push to GitHub and your PPA is ready to go:
git commit -a -m "Added APT repository Action Workflow_4"
git push -u origin main

#Now user can add your repo as per:
#Once the action has run successfully, users can add your repository like this (replace the placeholders):
# Add the GPG key
curl -sL https://larreblarsson.github.io/SNAP-Connection-Manager/public.key | sudo gpg --dearmor -o /usr/share/keyrings/SNAP-Connection-Manager-keyring.gpg

#Add the repository to sources.list
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/SNAP-Connection-Manager-keyring.gpg] \
  https://larreblarsson.github.io/SNAP-Connection-Manager stable main" \
  | sudo tee /etc/apt/sources.list.d/SNAP-Connection-Manager.list > /dev/null

#And then they can do Update and install
sudo apt update
sudo apt install <your-package-name>













#############################
# Install pillown and gnupg #
#############################
sudo apt update
sudo apt-get install python3-pil python3-pil.imagetk python3-venv python3-tk
sudo apt-get install python3-gnupg
































